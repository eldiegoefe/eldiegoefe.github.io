<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Clojure, nuevo entretenimiento | Certezas Dudosas</title>
<meta name="keywords" content="lisp, clojure">
<meta name="description" content="En el mundo Emacs se menciona bastante el lenguaje Clojure, como un dialecto de
Lisp que corre sobre el Java Virtual Machine, lo cual constituye para mi un dato
casi completamente inutil, puesto que desconozco Java y su JVM. De cualquier
manera, mientras continúo leyendo ANSI Common Lisp, me dieron ganas de probar,
así que guardo aquí las instrucciones de instalación para usar Clojure con Emacs
en Linux.
La cuestión no es tan complicada, primero verificamos desde un terminal
que Java está instalado:">
<meta name="author" content="Diego Efe">
<link rel="canonical" href="http://localhost:1313/posts/2014/2014-11-27-clojure/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/2014/2014-11-27-clojure/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Certezas Dudosas (Alt + H)">Certezas Dudosas</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Clojure, nuevo entretenimiento
    </h1>
    <div class="post-meta"><span title='2014-11-27 10:00:00 +0000 UTC'>November 27, 2014</span>&nbsp;·&nbsp;<span>Diego Efe</span>

</div>
  </header> 
  <div class="post-content"><p>En el mundo Emacs se menciona bastante el lenguaje Clojure, como un dialecto de
Lisp que corre sobre el Java Virtual Machine, lo cual constituye para mi un dato
casi completamente inutil, puesto que desconozco Java y su JVM. De cualquier
manera, mientras continúo leyendo ANSI Common Lisp, me dieron ganas de probar,
así que guardo aquí las instrucciones de instalación para usar Clojure con Emacs
en Linux.</p>
<p>La cuestión no es tan complicada, primero verificamos desde un terminal
que Java está instalado:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ java -version
</span></span><span style="display:flex;"><span>java version &#34;1.7.0_65&#34;
</span></span><span style="display:flex;"><span>OpenJDK Runtime Environment (IcedTea 2.5.2) (Arch Linux build 7.u65_2.5.2-3-x86_64)
</span></span><span style="display:flex;"><span>OpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)
</span></span></code></pre></div><p>Como en mi caso obtuve el mensaje precedente, no me tuve que preocupar
de instalar Java.</p>
<p>Las instrucciones de instalación están en <a href="http://clojure-doc.org/articles/tutorials/emacs.html">Clojure with
Emacs</a>. En
resumen, lo que hice fue visitar la página de
<a href="http://leiningen.org/">Leiningen</a> y entonces:</p>
<ul>
<li>Bajar el script de bash (de nombre &quot;<em>lein</em>&quot;)</li>
<li>Copiarlo en una carpeta (<em>~/programas/lein/</em>)</li>
<li>Ir a <em>/usr/bin</em> y crear allí un symlink a lein (con &quot;<em>sudo ln -s
~/programas/lein/lein</em>&quot;). El directorio /usr/bin está en el PATH
así que todo lo que ahí se almacena puede ser encontrado para su
ejecución. El symlink guardado allí apunta al programa en la
dirección donde lo guardamos, así que ahora podremos ejecutar lein
desde cualquier lugar.</li>
<li>Pero aún falta volver ejecutable el script (con &quot;<em>chmod a+x
lein</em>&quot;)</li>
<li>Finalmente hay que ejecutar lein, lo cual hace que se baje Leiningen
y se instale en el directorio <em>~/.lein</em>.</li>
</ul>
<p>El directorio creado originalmente (~/programas/lein) debe permanecer
porque allí sigue estando lein, que se ejecutará siempre que se cree un
proyecto (lo que se baja en ~/.lein no lo sustituye).</p>
<p><em>Agregado</em>: no hace falta copiar <em>lein</em> en un directorio como
<em>~/programas/lein/</em> y luego armar un symlink desde <em>/usr/bin</em>, se puede
directamente copiar lein en este último y listo.</p>
<p>En Emacs instalé CIDER, y además como tengo Prelude habilité en el
archivo prelude-modules.el la linea (require 'prelude-clojure). Así que
si no lo instalaba yo, el mismo Prelude hubiese bajado CIDER.</p>
<p>El tutorial de Clojure with Emacs indica que hay que ejecutar estas dos
órdenes desde un terminal (el resultado es la creación de un proyecto
llamado <em>command-line-args</em> dentro de un subdirectorio que se ubica
dentro del directorio actual en que se encuentra el terminal):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ lein new command-line-args
</span></span><span style="display:flex;"><span>$ cd command-line-args
</span></span></code></pre></div><p>Luego desde Emacs se abre el archivo /command-line-args/project.clj y se
lo edita para agregar al texto que ya tiene, la siguiente linea (siempre
según el tutorial):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-clojure" data-lang="clojure"><span style="display:flex;"><span><span style="color:#e6db74">:profiles</span> {<span style="color:#e6db74">:dev</span> {<span style="color:#e6db74">:plugins</span> [[cider/cider-nrepl <span style="color:#e6db74">&#34;0.7.0&#34;</span>]]}}
</span></span></code></pre></div><p>Hay que cambiar la versión que allí se coloca, puesto que ya no será la
&quot;0.7.0&quot;. En el <a href="https://github.com/clojure-emacs/cider-nrepl">github de
cider-nrepl</a> figura la
última versión. Una vez que hayamos agregado esta linea hay que guardar
el archivo y hacer desde allí mismo <strong>M-x cider-jack-in</strong>. Si todo va
bien se abre un buffer con el prompt del repl.</p>
<p>Tuve que dar varias vueltas hasta que esto último funcionó porque
aparecían mensajes de error antes de abrir el buffer o en el mismo
buffer. Lo que sucede es que debe coincidir la versión del cider-nrepl
con la versión de cider instalada. Cuando sustituía &quot;0.7.0&quot; por
&quot;0.8.2&quot; daba un mensaje diciendo que no encontraba esa versión para
bajar desde los repositorios y cuando intentaba con &quot;0.8.1&quot; me decía</p>
<pre><code>WARNING: CIDERs version (0.8.2-snapshot) does not match cider-nrepl version (0.8.1)
</code></pre>
<p>Todo se solucionó cuando en vez de poner &quot;0.8.2&quot; escribí
&quot;0.8.2-SNAPSHOT&quot; (por eso hay que prestar atención a cuál es la
versión de CIDER que está instalada y copiar el mismo código, el cual
seguramente coincide con la versión que indica el <a href="https://github.com/clojure-emacs/cider-nrepl">github de
cider-nrepl</a>). Y <strong>ojo, es
todo con mayúsculas</strong>, no importa cómo aparezca la versión de CIDER. Y
voilá:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-clojure" data-lang="clojure"><span style="display:flex;"><span><span style="color:#75715e">; CIDER 0.8.2alpha (package: 20141126.715) (Java 1.7.0_65, Clojure 1.6.0, nREPL 0.2.6)</span>
</span></span><span style="display:flex;"><span>user&gt;
</span></span></code></pre></div><p>Para averiguar la versión instalada de cider:</p>
<pre tabindex="0"><code class="language-terminal" data-lang="terminal">M-x cider-version
</code></pre><h2 id="un-nuevo-comienzo">Un nuevo comienzo<a hidden class="anchor" aria-hidden="true" href="#un-nuevo-comienzo">#</a></h2>
<p>Ahora, con todo listo para usarse, podemos seguir algún tutorial, como
el de <a href="http://www.braveclojure.com/">Clojure for the brave and true</a>. El
primer capítulo ya nos permite probar las cosas más básicas, como armar
un proyecto nuevo con <em>lein</em>, armar el ejecutable java para distribuir,
y jugar con el repl.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/lisp/">Lisp</a></li>
      <li><a href="http://localhost:1313/tags/clojure/">Clojure</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Certezas Dudosas</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
